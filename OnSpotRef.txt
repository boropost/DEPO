quickstart-android/auth/README.md
spotcast-45e35.firebaseapp.com //domain

add anfroid Enter the codelab's package name: com.google.firebase.codelab.friendlychat.

https://developers.facebook.com/docs/facebook-login/android/  richcluo@gmail.com 
facebook login> get start SDK choose platform > android >[download Facebook SDK] > project structure | new project  : Select API 15/Android 4.0.3
proj build.gradle : repositories {    mavenCentral()
app  build.gradle : dependencies {   compile 'com.facebook.android:facebook-android-sdk:[4,5)'
Package:com.google.firebase.quickstart.database
Default Activity:com.google.firebase.quickstart.database.SignInActivity
Enable Single Sign On
import com.facebook.FacebookSdk;
import com.facebook.appevents.AppEventsLogger;
layout.xml <com.facebook.login.widget.LoginButton
manifest    
<uses-permission android:name="android.permission.INTERNET"/>
<meta-data  android:name="com.facebook.sdk.ApplicationId"
            android:value="@string/facebook_app_id"
app/src/main/res/values/ids.xml <string name="facebook_app_id">151027222121181</string> //copy ids.xml may to values-w820dp notvalues  
misssing .ApplicationId java.lang.NullPointerException at java.util.concurrent.ConcurrentHashMap.containsKey(ConcurrentHashMap.java:774)
 at com.facebook.internal.Utility.queryAppSettings(Utility.java:822)  
 at com.facebook.login.widget.LoginButton$1.run(LoginButton.java:489)
 
 AppId/sec at settings basic
add prod : login, Valid OAuth redirect URIs = https://auth/handler (from  firebase) 
app domain : database-748b1.firebaseapp.com (from  firebase)//facebook err:Given URL is not allowed by the App config
add platform>web >url :https://database-748b1.firebaseapp.com //match above
keyhash: tUw2F8+ETK5kjylFABKlr5QLrBk=//keytool -exportcert -alias androiddebugkey -keystore debug.keystore | openssl sha1 -binary | openssl base64

https://apps.twitter.com/  richcluo@gmail.com
app/src/main/res/values/ids.xml
    <string name="twitter_consumer_key">jf1QXxq65V5gM6sTlJjw5m7Ow</string>
    <string name="twitter_consumer_secret">mPI3b5Yk20woNnta9kwTnIRFVPoykYGgN98k1tpoVeuENXRUcu</string>

build.gradle of top level
buildscript {
    dependencies {
        classpath "com.android.databinding:dataBinder:1.0-rc1"
build.gradle of application level
dependencies {//match proj struct > dependencies
    compile 'com.android.support:recyclerview-v7:23.0.0'
    // Facebook Android SDK (only required for Facebook Login)
    compile 'com.facebook.android:facebook-android-sdk:4.9.0'
    / Twitter Android SDK (only required for Twitter Login)
    compile('com.twitter.sdk.android:twitter-core:1.6.6@aar') {
        transitive = true
    }
    compile('com.twitter.sdk.android:twitter:1.13.1@aar') {
        transitive = true
    }

skooterapp/app/src/main/AndroidManifest.xml
<activity android:name=".LoadingActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
<activity
            android:name=".MainActivity"
LoadingActivity.java
    protected void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.activity_loading);//res/layout/activity_loading.xml
startActivity(new Intent(this, MainActivity.class));

quickstart-android/auth/app/src/minSdkJellybean/
FacebookLoginActivity.java : onCreate{setContentView(R.layout.activity_facebook); //bind with activity_facebook.xml
findViewById(R.id.button_facebook_login) //android:id="@+id/button_facebook_login"

mAuth.signInWithEmailAndPassword(email, password)
                .addOnCompleteListener(new OnCompleteListener<AuthResult>() {
                    @Override
                    public void onComplete(@NonNull Task<AuthResult> task) {task.getResult().getUser()
https://developers.google.com/android/reference/com/google/android/gms/tasks/Continuation

quickstart-android/database/app/src/main/res/menu/menu_main.xml
<menu  tools:context=".MainActivity">//diff menu per act
    <item
        android:id="@+id/action_logout"
quickstart-android/database/app/src/main/java/com/google/firebase/quickstart/database/MainActivity.java   
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu_main, menu);
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == R.id.action_logout) {
            FirebaseAuth.getInstance().signOut();
            startActivity(new Intent(this, SignInActivity.class));
activity_main.xml            
   <android.support.design.widget.TabLayout        android:id="@+id/tabs"
   <android.support.v4.view.ViewPager        android:id="@+id/container"        android:layout_below="@id/tabs" />
//TabLayout {ViewPager{FragmentPagerAdapter{Fragment[]{RecentPostsFragment,MyPostsFragment,MyTopPostsFragment}}
        mPagerAdapter = new FragmentPagerAdapter(getSupportFragmentManager()) {
            private final Fragment[] mFragments = new Fragment[] {
                    new RecentPostsFragment(),
                    new MyPostsFragment(),
                    new MyTopPostsFragment(),
            };
        mViewPager = (ViewPager) findViewById(R.id.container);
        mViewPager.setAdapter(mPagerAdapter);
        TabLayout tabLayout = (TabLayout) findViewById(R.id.tabs);
        tabLayout.setupWithViewPager(mViewPager)
        findViewById(R.id.fab_new_post).setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {//FloatingActionButton for new post
                startActivity(new Intent(MainActivity.this, NewPostActivity.class));
        
https://firebase.google.com/docs/database/admin/retrieve-data            
database/NewPostActivity.java .writeNewPost            
        String key = mDatabase.child("posts").push().getKey(); //get next uid
        Post post = new Post(userId, username, title, body);
        Map<String, Object> postValues = post.toMap(); //post key-value pairs as map 

        Map<String, Object> childUpdates = new HashMap<>();
        childUpdates.put("/posts/" + key, postValues);
        childUpdates.put("/user-posts/" + userId + "/" + key, postValues);

        mDatabase.updateChildren(childUpdates); //update 2 

database/PostDetailActivity.java
    protected void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.activity_post_detail);//res/layout/activity_post_detail.xml
public void onStart() {
        ValueEventListener postListener = new ValueEventListener() {
            public void onDataChange(DataSnapshot dataSnapshot) {
                Post post = dataSnapshot.getValue(Post.class); //latest
mPostReference.addValueEventListener(postListener);

    private void postComment() {
        FirebaseDatabase.getInstance().getReference().child("users").child(uid)
                .addListenerForSingleValueEvent(new ValueEventListener() {//stops listening after exec onDataChange, auto remove 
                    public void onDataChange(DataSnapshot dataSnapshot) {
                        User user = dataSnapshot.getValue(User.class);
                        
https://developer.android.com/guide/topics/ui/layout/relative.html
<include
        android:id="@+id/post_text_layout"
        layout="@layout/include_post_text" //reusable layout/include_post_text.xml
        android:layout_below="@+id/post_author_layout"  //related pos to another android:id 
        
https://developer.android.com/guide/topics/ui/layout/recyclerview.html
        mAdapter = new CommentAdapter(this, mCommentsReference);
        mCommentsRecycler.setAdapter(mAdapter);
public CommentAdapter(final Context context, DatabaseReference ref) {
            ChildEventListener childEventListener = new ChildEventListener() {
                public void onChildAdded(DataSnapshot dataSnapshot, String previousChildName) { //onChildChanged ...
                Comment comment = dataSnapshot.getValue(Comment.class);
         ref.addChildEventListener(childEventListener);       
<android.support.v7.widget.RecyclerView
tools:listitem="@layout/item_comment" />

fragment has its own layout and lifecycle closely related to the lifecycle of its host activity. add or remove fragments in an activity while the activity is running. fragment can implement a behavior has no user interface (return null from onCreateView)
Activity's onAttachFragment() ->  
Fragment's onCreate(non-graphical initialisations: assign variables, get Intent extras,except access View hierarchy not ready before Activity's onCreate()) ->
Fragment's onCreateView(graphical initialisations and assign View variables). 
Activity's onCreate() ->
Fragment's onActivityCreated() to final initialisations (for example, modifying UI elements).

<FrameLayout tools:context=".MainActivity">
<android.support.v7.widget.RecyclerView 
    android:id="@+id/messages_list"
    tools:listitem="@layout/item_post" />
fragment/PostListFragment.java vs https://github.com/prathmeshranaut/skooterapp/blob/master/app/src/main/java/com/skooterapp/PostAdapter.java
public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_all_posts, container, false);//res/layout/fragment_all_posts.xml
        mRecycler = (RecyclerView) rootView.findViewById(R.id.messages_list);
public void onActivityCreated((Bundle savedInstanceState) {
        mManager = new LinearLayoutManager(getActivity());//(this, LinearLayoutManager.VERTICAL|HORIZONTAL, false); (reverseLayout)             mManager.setReverseLayout|.setStackFromEnd(true);//displayed new from the bottom
        mRecycler.setLayoutManager(mManager);//LayoutManager for laying out each item in the view specifiying orientation/order
        
        Query postsQuery = getQuery(mDatabase);//databaseReference.child("posts").limitToFirst(100);
        mAdapter = new FirebaseRecyclerAdapter<Post, PostViewHolder>(Post.class, R.layout.item_post,
        PostViewHolder.class, postsQuery) {
            protected void populateViewHolder(final PostViewHolder viewHolder, final Post model, final int position) {
                final DatabaseReference postRef = getRef(position);
                final String postKey = postRef.getKey();
                viewHolder.itemView.setOnClickListener(new View.OnClickListener() {//click post item to display detail
                    public void onClick(View v) {
                        Intent intent = new Intent(getActivity(), PostDetailActivity.class);//intent move from one activity to another 
                        intent.putExtra(PostDetailActivity.EXTRA_POST_KEY, postKey); //getIntent().getExtras().getString("AnyKeyName");
                        startActivity(intent);
                 
                viewHolder.bindToPost(model, new View.OnClickListener() {
                    public void onClick(View starView) {
                        DatabaseReference globalPostRef = mDatabase.child("posts").child(postRef.getKey());
                        DatabaseReference userPostRef = mDatabase.child("user-posts").child(model.uid).child(postRef.getKey());
                        onStarClicked(globalPostRef);
                        onStarClicked(userPostRef);
                    }
                }); 
        mRecycler.setAdapter(mAdapter);      
        private void onStarClicked(DatabaseReference postRef) {
        postRef.runTransaction(new Transaction.Handler() {
            public Transaction.Result doTransaction(MutableData mutableData) {
                Post p = mutableData.getValue(Post.class);
                if (p.stars.containsKey(getUid())) {//FirebaseAuth.getInstance().getCurrentUser().getUid();
                    p.starCount = p.starCount - 1;
                    p.stars.remove(getUid());
                } else {
                    p.starCount = p.starCount + 1;
                    p.stars.put(getUid(), true);
                }
                mutableData.setValue(p);
                return Transaction.success(mutableData);
            }
            public void onComplete(DatabaseError databaseError, boolean b,
                                   DataSnapshot dataSnapshot) {
                Log.d(TAG, "postTransaction:onComplete:" + databaseError);
            }
        });

Firebase ref = new Firebase("https://dinosaur-facts.firebaseio.com/dinosaurs");
Query queryRef = ref.orderByChild("height");

postsQuery.addChildEventListener(new ChildEventListener() {
    public void onChildAdded(DataSnapshot snapshot, String previousChild) {
        System.out.println(snapshot.getKey() + " was " + snapshot.getValue().get("height") + " meters tall");
    }
    // ....
});
msgRef.orderByChild("date").endAt(3)
http://cliffordhall.com/2017/04/using-firebase-cloud-functions-manage-compound-key-index/
        
firebase/AndroidChat //old
open-source-android-apps
http://www.parallelcodes.com/android-using-stored-procedure-ms-sql-server/

https://developer.android.com/training/location/retrieve-current.html
https://developer.android.com/guide/topics/location/strategies.html //android.location.LocationManager 
https://developer.android.com/training/location/retrieve-current.html //FusedLocationProviderClient depend on Google Play Services SDK  AV SDK Manager: click SDK Tools, expand Support Repo, select Google Repository    dependencies { compile 'com.google.android.gms:play-services:11.0.2'    }//device that runs Android 4.0 or higher and includes Google Play Store.
https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample
https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates
request the user's permission by declaring either the 
ACCESS_COARSE_LOCATION NETWORK_PROVIDER (street block level)
or ACCESS_FINE_LOCATION NETWORK_PROVIDER and GPS_PROVIDER
<manifest ... >
    <uses-permission android:name="android.permission.ACCESS_COARSE|FINE_LOCATION" />    
    <uses-feature android:name="android.hardware.location.network|gps" /><!-- app targets Android 5.0 (API level 21) or higher. -->
LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
String locationProvider = LocationManager.NETWORK_PROVIDER;//LocationManager.GPS_PROVIDER
Location lastKnownLocation = locationManager.getLastKnownLocation(locationProvider);
LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
      // Called when a new location is found by the network location provider.
      makeUseOfNewLocation(location);
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {}

    public void onProviderEnabled(String provider) {}

    public void onProviderDisabled(String provider) {}
  };
locationManager.requestLocationUpdates(locationListener, 0, 0, locationListener);  
locationManager.removeUpdates(locationListener);

keytool -genkey -v -keystore ~/.android/debug.keystore -storepass android -alias androiddebugkey -keypass android -dname "CN=Android Debug,O=Android,C=US"
//[Storing C:/Users/holly/.android/debug.keystore]
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore -list -v -storepass android 
//Valid from: Sat Jul 08 12:04:40 EDT 2017 until: Fri Oct 06 12:04:40 EDT 2017 SHA1: FB:F1:49:00:44:C9:EF:A9:53:39:72:25:37:5E:34:F0:8C:5F:B5:D3 
shared by many proj debug

download google-services.json and drag to app dir in AV or filesys, 
classpath 'com.google.gms:google-services:3.1.0' to proj level build.gradle
apply plugin: 'com.google.gms.google-services'  to app level build.gradle if not auto added
sync gradle (upgrade if need) then app repoint to src/main dir

enable Virtual T in BIOS, run app first time to start emulator to be connected device, run again to launch app on it.
5:debugger> drag variables to right to view frames/threads as call stack
Log.d(tag, message);//6:Android Monitor>Logcat
V — Verbose (lowest priority)
D — Debug
I — Info
W — Warning
E — Error
A — Assert 
Android Monitor: device being monitored=ADB enabled > memory|cpu|network monitor 
Tools > Android > SDK Manager > SDK platform (android)| tools (emulator,playsvc,google USB driver...) selecct > apply
                > AVD Manager
                >enable ADB int (for run on phone)
        firebase>auth/database         
run> edit config > 
VCS > check out from version control: github
File>Project Structure=>app(i.e left pannel)=>Properties=>SDK loc proj gradle/android version 
app>SDK|Build Tools Version,sign,Flavor default|minSDKJellyBean:min/targetSDK Version 19 (change to 16 =phone), build type:debug|relese dependencies
     Settings > Plugins (built-in Image Asset Studio, Theme and Layout Editor ) >Browse repositories  ADB(android cmd), Codota
Right-click the res folder and select New > Image Asset (res/mipmap launcher icon, res/drawable other types of icons, can access image from the main thread only.refer to image as @drawable in XML or Drawable in Java)
<ImageView    android:src="@drawable/myimage" />
Resources res = getResources();// Context.getResources class applies to UI objects, such as activities, fragments, layouts, views,
Drawable drawable = res.getDrawable(R.drawable.myimage);
ImageView imageView = (ImageView) findViewById(R.id.myimageview);
imageView.setImageResource(R.drawable.myimage);//reset image
//android.R.layout.xxx standard/system resources @android:color/xxx
getWindow().setBackgroundDrawableResource(R.drawable.my_background_image) ;
setContentView(R.layout.main_screen);
mFlipper.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.hyperspace_in));//view anim (old)
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"    android:oneshot="true"> //drawable anim
    <item android:drawable="@drawable/rocket_thrust1" android:duration="200" />
<EditText id="text"   android:textColor="?android:textColorSecondary" //apply attr:val defined in std android:textColorSecondary style
style="@style/CodeFont" //apply all attr:val defined in CodeFont style
res/values/A theme is styles applied to an entire Activity or app, rather than an individual View
<application android:theme="@style/CustomTheme">//apply to whole app in AndroidManifest.xml 
<activity android:theme="@android:style/Theme.Translucent">//only std theme (tranparent) to the act
<resources>
    <style name="CodeFont" parent="@android:style/TextAppearance.Medium">//<style name="CodeFont.Red.Big"> inheritance Big:Red:CodeFont
        <item name="android:textColor">#00FF00</item>
Build > Select Build Variant from the menu bar (or btn tool window bar to select minSdkJellyBeanDebug vs minSdkIncs
      >rebuild (if unused import) = clean (if cant resolve R) + make proj
      >sel variant : debug|release
Analyze > dependency | stacktrace  | Inspect Code (Lint find issues such as deprecated elements, or API calls that aren't supported by your target API.)    
run app second time to see app on phone

Enable USB debugging on your device by going to Settings > Developer options
Note: On Android 4.2 and newer, Developer options is hidden by default. To make it available, go to Settings > About phone and tap Build number seven times. Return to the previous screen to find Developer options.
down load OEM USB driver.exe from sumsong ny model from settings
win7 >device mgr> sumsung Android ADB intf> Update Driver Software >Browse Google USB Driver in C:\Users\holly\AppData\Local\Android\sdk\extras\google\usb_driver\. after install google USB driver from SDL mgr

emulator bottom ...>location :GPS point
